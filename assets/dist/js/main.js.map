{"version":3,"sources":["js/includes/_map.js","js/main.js"],"names":["$","globalName","defaultMapOptions","zoom","panControl","zoomControl","mapTypeControl","scaleControl","streetViewControl","overviewMapControl","key","defaultStyle","featureType","stylers","visibility","MapClass","$dom","options","_this","this","$container","length","map","extend","markers","window","google","maps","Map","bounds","LatLngBounds","InfoWindow","prototype","set","addMarker","latlng","icon","clickCallback","opts","position","marker","Marker","push","fitBounds","setCenter","getCenter","setTimeout","getZoom","setZoom","bind","addListener","reset","i","setMap","setStyle","json","FOODTRUCK_GMAP_STYLE","readyCallbacks","googleMapsInitialising","googleMapsInitialised","onGoogleReady","callback","apiKey","FOODTRUCK_GMAP_APIKEY","s","document","createElement","async","src","getElementsByTagName","appendChild","exprt","_googleMapsReady","ready","create","parseLocation","address","geoclient","Geocoder","geocode","results","status","GeocoderStatus","OK","geometry","location","formatted_address","jQuery","console","error","renderLocationsModule","render","container","detailContainer","find","detailBack","detailDetails","detailMap","listContainer","itemsDOM","itemsMap","items","detailMapGObj","mainMapGObj","on","e","preventDefault","hide","show","positionPage","event","trigger","scrollTo","offset","top","loadItem","obj","html","_foundAddr","append","FOODTRUCK_TXT_DIRECTIONS","_latlng","FoodTruckGMap","googLatLng","loadAll","each","preGeoCode","parseJSON","lat","lng","formatted","windowWidth","innerWidth","documentElement","clientWidth","scrollwheel","item","addr","data","call","locationsMapReady","FoodTruckFramework"],"mappings":"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","file":"main.js","sourcesContent":["// GMap Class\n// paulcollett.com\n(function($){\n  var globalName = 'FoodTruckGMap';\n\n\tvar defaultMapOptions = {\n\t\tzoom: 13,\n\t\tpanControl: false,\n\t\tzoomControl: true,\n\t\tmapTypeControl: false,\n\t\tscaleControl: false,\n\t\tstreetViewControl: false,\n    overviewMapControl: false,\n    key: ''\n\t}\n\n\tvar defaultStyle = [{\n\t\t\"featureType\": \"poi.business\",\n\t\t\"stylers\": [{\"visibility\": \"off\"}]\n\t}];\n\n\tvar MapClass = function($dom,options){\n\n\t\tvar _this = this;\n\n\t\tthis.$container = $dom && $dom.length ? $dom : $($dom);\n\t\tthis.map = false;\n\t\tthis.options = $.extend(defaultMapOptions,options||{});\n\t\tthis.markers = [];\n\n\t\t// create map\n\t\tthis.map = new window.google.maps.Map(_this.$container[0],_this.options);\n\t\tthis.bounds = new google.maps.LatLngBounds();\n\n\t\t//suppress poi windows\n\t\tgoogle.maps.InfoWindow.prototype.set = function(){};\n\n\t\tthis.addMarker = function(latlng,icon, clickCallback){\n\n\t\t\tif(!this.map) return false;\n\n\t\t\tvar opts = {\n\t\t\t\tposition: latlng, // obj {lat: , lng: }\n\t\t\t\tmap: _this.map,\n      }\n\n\t\t\tif(icon) opts.icon = icon;\n\n      var marker = new google.maps.Marker(opts);\n\n\t\t\tthis.markers.push(marker);\n\n\t\t\tthis.bounds.extend(opts.position);\n\t\t\tif(this.markers.length > 1) {\n\t\t\t\tthis.map.fitBounds(this.bounds);\n\t\t\t} else {\n\t\t\t\tthis.map.setCenter(this.bounds.getCenter());\n\t\t\t}\n\t\t\tsetTimeout(function(){\n\t\t\t\tif(this.map.getZoom() > this.options.zoom) this.map.setZoom(this.options.zoom);\n\t\t\t}.bind(this), 1000);\n\n\t\t\tclickCallback && marker.addListener('click', clickCallback);\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.reset = function(){\n\t\t\tfor (var i = 0; i < this.markers.length; i++) this.markers[i].setMap(null);\n\t\t\tthis.markers = [];\n\t\t\tthis.bounds = new google.maps.LatLngBounds();\n\t\t}\n\n\t\tthis.setStyle = function(json){\n\t\t\tthis.map.set('styles',json);\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.setStyle(window.FOODTRUCK_GMAP_STYLE || defaultStyle);\n\n\t\treturn this;\n\t}\n\n\tvar readyCallbacks = [];\n\n\tvar googleMapsInitialising = false;\n\n\tvar googleMapsInitialised = false;\n\n\tvar onGoogleReady = function(callback){\n\n\t\tif(googleMapsInitialised){\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\n\t\treadyCallbacks.push(callback);\n\n\t\tif(googleMapsInitialising) return;\n    googleMapsInitialising = true;\n\n    var apiKey = window.FOODTRUCK_GMAP_APIKEY || 'AIzaSyAcB9Jwud7F5F_fO2BFHCIGswomX5pjKEQ';\n\n\t\tvar s = document.createElement('script');\n\t\ts.async = true;\n\t\ts.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&callback=' + globalName + '._googleMapsReady&key=' + apiKey;\n\t\tdocument.getElementsByTagName('script')[0].appendChild(s);\n\t}\n\n\tvar exprt = {};\n\n\texprt._googleMapsReady = function(){\n\t\tgoogleMapsInitialised = true;\n\t\tfor (var i = 0; i < readyCallbacks.length; i++) readyCallbacks[i]();\n\t\treadyCallbacks = [];\n\t}\n\n\texprt.ready = function(callback){\n\t\tonGoogleReady(callback);\n\t}\n\n\texprt.create = function($dom,options){\n\n\t\tif(!googleMapsInitialised) return false;\n\n\t\tvar map = new MapClass($dom,options);\n\n\t\treturn map;\n\t}\n\n\texprt.parseLocation = function(address,callback){\n\t\texprt.ready(function(){\n\t\t\tvar geoclient = new google.maps.Geocoder();\n\t\t\tgeoclient.geocode({'address': address}, function(results, status){\n\t\t\t\t(status == google.maps.GeocoderStatus.OK) && callback && callback(results[0].geometry.location, results[0].formatted_address);\n\t\t\t});\n\t\t});\n\t}\n\n\twindow[globalName] = exprt;\n\n})(jQuery);\n/*\n(function($){\n\n\tvar $maps = $('div[data-map]');\n\n\tif($maps.length){\n\t\tvar cname = 'map-gm-container';\n\t\t$maps.addClass(cname);\n\t\t$('head').append('<style>.' + cname+ '{background:rgba(0,0,0,0.05)} .' + cname+ ' img{max-width:none!important}.'\n\t\t\t+ cname + ' a{display:none!important}.gm-style-cc{height:0!important}</style>');\n\t}\n\n\t$maps.each(function(){\n\n\t\tvar $this = $(this);\n\n\t\tGMap.ready(function(){\n\t\t\tvar map = GMap.create($this);\n\t\t\tvar marker = $this.attr('data-marker');\n\t\t\tvar locationString = $this.data('map');\n\t\t\tGMap.parseLocation(locationString,function(googLatLng){\n\t\t\t\tmap.addMarker(googLatLng,marker);\n\t\t\t});\n\t\t});\n\n\t});\n\n})(jQuery);*/\n","// GMap Class\n// paulcollett.com\n(function($){\n  var globalName = 'FoodTruckGMap';\n\n\tvar defaultMapOptions = {\n\t\tzoom: 13,\n\t\tpanControl: false,\n\t\tzoomControl: true,\n\t\tmapTypeControl: false,\n\t\tscaleControl: false,\n\t\tstreetViewControl: false,\n    overviewMapControl: false,\n    key: ''\n\t}\n\n\tvar defaultStyle = [{\n\t\t\"featureType\": \"poi.business\",\n\t\t\"stylers\": [{\"visibility\": \"off\"}]\n\t}];\n\n\tvar MapClass = function($dom,options){\n\n\t\tvar _this = this;\n\n\t\tthis.$container = $dom && $dom.length ? $dom : $($dom);\n\t\tthis.map = false;\n\t\tthis.options = $.extend(defaultMapOptions,options||{});\n\t\tthis.markers = [];\n\n\t\t// create map\n\t\tthis.map = new window.google.maps.Map(_this.$container[0],_this.options);\n\t\tthis.bounds = new google.maps.LatLngBounds();\n\n\t\t//suppress poi windows\n\t\tgoogle.maps.InfoWindow.prototype.set = function(){};\n\n\t\tthis.addMarker = function(latlng,icon, clickCallback){\n\n\t\t\tif(!this.map) return false;\n\n\t\t\tvar opts = {\n\t\t\t\tposition: latlng, // obj {lat: , lng: }\n\t\t\t\tmap: _this.map,\n      }\n\n\t\t\tif(icon) opts.icon = icon;\n\n      var marker = new google.maps.Marker(opts);\n\n\t\t\tthis.markers.push(marker);\n\n\t\t\tthis.bounds.extend(opts.position);\n\t\t\tif(this.markers.length > 1) {\n\t\t\t\tthis.map.fitBounds(this.bounds);\n\t\t\t} else {\n\t\t\t\tthis.map.setCenter(this.bounds.getCenter());\n\t\t\t}\n\t\t\tsetTimeout(function(){\n\t\t\t\tif(this.map.getZoom() > this.options.zoom) this.map.setZoom(this.options.zoom);\n\t\t\t}.bind(this), 1000);\n\n\t\t\tclickCallback && marker.addListener('click', clickCallback);\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.reset = function(){\n\t\t\tfor (var i = 0; i < this.markers.length; i++) this.markers[i].setMap(null);\n\t\t\tthis.markers = [];\n\t\t\tthis.bounds = new google.maps.LatLngBounds();\n\t\t}\n\n\t\tthis.setStyle = function(json){\n\t\t\tthis.map.set('styles',json);\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.setStyle(window.FOODTRUCK_GMAP_STYLE || defaultStyle);\n\n\t\treturn this;\n\t}\n\n\tvar readyCallbacks = [];\n\n\tvar googleMapsInitialising = false;\n\n\tvar googleMapsInitialised = false;\n\n\tvar onGoogleReady = function(callback){\n\n\t\tif(googleMapsInitialised){\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\n\t\treadyCallbacks.push(callback);\n\n\t\tif(googleMapsInitialising) return;\n    googleMapsInitialising = true;\n\n    var apiKey = window.FOODTRUCK_GMAP_APIKEY || 'AIzaSyAcB9Jwud7F5F_fO2BFHCIGswomX5pjKEQ';\n\n\t\tvar s = document.createElement('script');\n\t\ts.async = true;\n\t\ts.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&callback=' + globalName + '._googleMapsReady&key=' + apiKey;\n\t\tdocument.getElementsByTagName('script')[0].appendChild(s);\n\t}\n\n\tvar exprt = {};\n\n\texprt._googleMapsReady = function(){\n\t\tgoogleMapsInitialised = true;\n\t\tfor (var i = 0; i < readyCallbacks.length; i++) readyCallbacks[i]();\n\t\treadyCallbacks = [];\n\t}\n\n\texprt.ready = function(callback){\n\t\tonGoogleReady(callback);\n\t}\n\n\texprt.create = function($dom,options){\n\n\t\tif(!googleMapsInitialised) return false;\n\n\t\tvar map = new MapClass($dom,options);\n\n\t\treturn map;\n\t}\n\n\texprt.parseLocation = function(address,callback){\n\t\texprt.ready(function(){\n\t\t\tvar geoclient = new google.maps.Geocoder();\n\t\t\tgeoclient.geocode({'address': address}, function(results, status){\n\t\t\t\t(status == google.maps.GeocoderStatus.OK) && callback && callback(results[0].geometry.location, results[0].formatted_address);\n\t\t\t});\n\t\t});\n\t}\n\n\twindow[globalName] = exprt;\n\n})(jQuery);\n/*\n(function($){\n\n\tvar $maps = $('div[data-map]');\n\n\tif($maps.length){\n\t\tvar cname = 'map-gm-container';\n\t\t$maps.addClass(cname);\n\t\t$('head').append('<style>.' + cname+ '{background:rgba(0,0,0,0.05)} .' + cname+ ' img{max-width:none!important}.'\n\t\t\t+ cname + ' a{display:none!important}.gm-style-cc{height:0!important}</style>');\n\t}\n\n\t$maps.each(function(){\n\n\t\tvar $this = $(this);\n\n\t\tGMap.ready(function(){\n\t\t\tvar map = GMap.create($this);\n\t\t\tvar marker = $this.attr('data-marker');\n\t\t\tvar locationString = $this.data('map');\n\t\t\tGMap.parseLocation(locationString,function(googLatLng){\n\t\t\t\tmap.addMarker(googLatLng,marker);\n\t\t\t});\n\t\t});\n\n\t});\n\n})(jQuery);*/\n\n(function($){\n\n  if(!$) {\n      console.error('jQuery needs to be loaded before the theme\\'s Javscript');\n      return false;\n  }\n\n  var exprt = {};\n  var $window = $(window);\n\n  var renderLocationsModule = function() {\n    var render = function() {\n      var container = $(this);\n      var detailContainer = container.find('.js-location-container');\n      var detailBack = detailContainer.find('.js-location-back, .button[href=#]');\n      var detailDetails = detailContainer.find('.js-location-details');\n      var detailMap = detailContainer.find('.js-location-map');\n      var listContainer = container.find('.js-location-list-container');\n      var itemsDOM = container.find('.js-location-expand-container');\n      var itemsMap = container.find('.js-locations-all-map');\n      var items = [];\n      var marker = null; // Feature: container.attr('data-marker') || null\n      var detailMapGObj = false;\n      var mainMapGObj = false;\n\n      detailBack.on('click', function(e){\n        e.preventDefault();\n        detailContainer.hide();\n        listContainer.show();\n        if(detailMapGObj) detailMapGObj.reset();\n        positionPage();\n        if(mainMapGObj) google.maps.event.trigger(mainMapGObj.map, \"resize\");\n      });\n\n      var positionPage = function(){\n        window.scrollTo(0, container.offset().top - 150);\n      }\n\n      var loadItem = function(obj) {\n        detailDetails.html(obj.html);\n        detailContainer.show();\n        listContainer.hide();\n\n        if(obj._foundAddr)\n            detailDetails.append('<hr />' + obj._foundAddr + '<br /><a href=\"https://maps.google.com?saddr=Current+Location&daddr=' + obj._foundAddr + '\" target=\"_blank\">' + (window.FOODTRUCK_TXT_DIRECTIONS || 'Directions') + '</a>');\n\n        positionPage();\n\n        if(!detailMapGObj) return;\n\n        google.maps.event.trigger(detailMapGObj.map, \"resize\");\n\n        if(obj._latlng) {\n          detailMapGObj.addMarker(obj._latlng,marker);\n        } else {\n          FoodTruckGMap.parseLocation(obj.address,function(googLatLng){\n            detailMapGObj.addMarker(googLatLng,marker);\n          });\n        }\n\n      }\n\n      var loadAll = function() {\n        itemsDOM.each(function(){\n          var html = $(this).html();\n          var address = $(this).find('script[data-addr]').html();\n          var preGeoCode = {};\n          try {\n            preGeoCode = $.parseJSON($(this).find('script[data-geocode]').html()) || {};\n          } catch (error) {\n            preGeoCode = {};\n          }\n          var obj = {\n            address: address,\n            html: html,\n            _latlng: preGeoCode.lat ? { lat: preGeoCode.lat, lng: preGeoCode.lng } : false,\n            _foundAddr: preGeoCode.formatted || false\n          };\n          items.push(obj);\n          $(this).on('click',loadItem.bind(null, obj))\n        });\n\n        if(!items.length) return;\n\n        FoodTruckGMap.ready(function(){\n            var windowWidth = window.innerWidth || document.documentElement.clientWidth;\n            detailMapGObj = FoodTruckGMap.create(detailMap, {\n              zoom: 15,\n              scrollwheel: (windowWidth > 980)\n            });\n            mainMapGObj = FoodTruckGMap.create(itemsMap, {\n              scrollwheel: false\n            });\n            for (var i = 0; i < items.length; i++) {\n                if(items[i]._latlng) {\n                  mainMapGObj.addMarker(items[i]._latlng,marker,loadItem.bind(null, items[i]));\n                  continue;\n                }\n                items[i].address && (function(item){\n                    FoodTruckGMap.parseLocation(items[i].address,function(googLatLng, addr){\n                        item._latlng = googLatLng;\n                        item._foundAddr = addr;\n                        mainMapGObj.addMarker(googLatLng,marker,loadItem.bind(null, item));\n                    });\n                })(items[i]);\n            };\n        });\n      }\n\n      loadAll();\n\n      itemsDOM.on('click', loadItem);\n    };\n\n    $('.js-location-module').each(function(){\n      var container = $(this);\n      if(container.data('_rendered')) return;\n      container.data('_rendered', true);\n      render.call(this);\n    });\n\n  }\n\n\n  exprt.locationsMapReady = renderLocationsModule;\n\n  window.FoodTruckFramework = exprt;\n})(window.jQuery);\n"]}